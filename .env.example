# ============================================================================
# CryptoSignal Bot - Environment Configuration
# ============================================================================
#
# IMPORTANT: Copy this file to .env and fill in your values
#   cp .env.example .env
#
# NEVER commit .env to version control!
# The .env file contains sensitive credentials and should remain private.
#
# ============================================================================

# ----------------------------------------------------------------------------
# REQUIRED: Telegram Bot Configuration
# ----------------------------------------------------------------------------

# Bot token from @BotFather on Telegram
# To get a token:
#   1. Message @BotFather on Telegram
#   2. Send /newbot and follow prompts
#   3. Copy the token (format: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11)
TELEGRAM_BOT_TOKEN=your_bot_token

# Webhook secret (minimum 32 characters for security)
# Generate with: openssl rand -hex 32
# This verifies webhook requests are from Telegram
TELEGRAM_WEBHOOK_SECRET=your_random_32_char_secret

# Comma-separated Telegram user IDs allowed to use the bot
# Find your ID: message @userinfobot on Telegram
# Example: 123456789,987654321
# Multiple users: 111111111,222222222,333333333
TELEGRAM_ALLOWED_USER_IDS=123456789

# Optional: Admin chat ID for error alerts and monitoring
# Use your own Telegram ID to receive alerts
# Leave empty to disable admin alerts
ADMIN_CHAT_ID=

# ----------------------------------------------------------------------------
# REQUIRED: Database Configuration
# ----------------------------------------------------------------------------

# PostgreSQL connection URL (async format)
# Format: postgresql://username:password@hostname:port/database
#
# Local development (default):
DATABASE_URL=postgresql://cryptosignal:changeme@localhost:5432/cryptosignal
#
# Remote server example:
# DATABASE_URL=postgresql://user:password@db.example.com:5432/cryptosignal
#
# To create the database and user:
#   psql -U postgres
#   CREATE ROLE cryptosignal WITH LOGIN PASSWORD 'changeme';
#   CREATE DATABASE cryptosignal OWNER cryptosignal;
#   GRANT ALL PRIVILEGES ON DATABASE cryptosignal TO cryptosignal;
#   \q

# ----------------------------------------------------------------------------
# RECOMMENDED: Cron Job Protection
# ----------------------------------------------------------------------------

# Secret for protecting internal cron endpoints
# Generate with: openssl rand -hex 32
# Required for: /internal/run-daily-signal, /internal/run-eod-outcomes
# Set this in production to prevent unauthorized cron job execution
EOD_CRON_SECRET=

# Recommended cron schedules:
# - Daily signal:     0 12 * * * (12:00 UTC / 07:00 EST)
# - EOD outcomes:     30 0 * * * (00:30 UTC - after markets close)
# - Admin heartbeat:  0 13 * * * (13:00 UTC - optional status check)

# ----------------------------------------------------------------------------
# OPTIONAL: External APIs
# ----------------------------------------------------------------------------

# Polymarket CLOB API key (higher rate limits than public Gamma API)
# Get from: https://docs.polymarket.com/
# Leave empty to use free public Gamma API
# POLYMARKET_CLOB_API_KEY=

# CryptoQuant or Glassnode API key (for exchange netflow data)
# This is a PAID service - free tier not available
# Leave empty or set WEIGHT_EXCHANGE_NETFLOW=0 to disable
# CRYPTOQUANT_API_KEY=

# FMP (Financial Modeling Prep) API key for macro economic calendar (FOMC/CPI)
# Free tier: https://site.financialmodelingprep.com/ - 250 calls/day
# Leave empty to use fallback "no_event" (score 0.5)
# FMP_API_KEY=

# Override FMP economic calendar URL (default: FMP stable economic-calendar)
# FMP_ECONOMIC_CALENDAR_URL=https://financialmodelingprep.com/stable/economic-calendar

# ----------------------------------------------------------------------------
# OPTIONAL: Data Fetcher Configuration
# ----------------------------------------------------------------------------

# Override ETF flows API URL if default host does not resolve or service moved
# ETF_FLOWS_URL=https://api.example.com/etf-flows

# Timeout for each fetcher request (seconds)
# Increase if you have slow network or API responses
# FETCHER_TIMEOUT=15

# Circuit breaker: failures before opening circuit
# CIRCUIT_FAILURE_THRESHOLD=3

# Circuit breaker: how long to keep circuit open (seconds)
# CIRCUIT_OPEN_SECONDS=300

# Cache TTL for fetcher results (seconds)
# Helps reduce API calls and improve response times
# CACHE_TTL_SECONDS=3600

# Retry configuration for failed fetches
# RETRY_ATTEMPTS=3
# RETRY_BASE_DELAY=1.0

# ----------------------------------------------------------------------------
# OPTIONAL: Signal Generation Parameters
# ----------------------------------------------------------------------------

# Minimum edge required to generate a signal (0.05 = 5%)
# Higher = fewer but higher-confidence signals
# EDGE_THRESHOLD=0.05

# Kelly fraction for position sizing (0.25 = quarter Kelly)
# 0.25 is conservative, 0.5 is aggressive, 1.0 is full Kelly
# KELLY_FRACTION=0.25

# Maximum position size as % of bankroll (0.05 = 5%)
# Safety cap even if Kelly suggests larger
# MAX_BANKROLL_PCT=0.05

# Slippage limit as decimal (0.01 = 1%)
# Skip signal if expected slippage exceeds this
# SLIPPAGE_LIMIT=0.01

# Default bankroll in USD (used if user hasn't set custom value)
# DEFAULT_BANKROLL_USD=1000

# ----------------------------------------------------------------------------
# OPTIONAL: Paper Trading Mode
# ----------------------------------------------------------------------------

# When true, all signals are tagged [PAPER] and no real money is risked
# Useful for testing and strategy validation
# PAPER_TRADING=false

# ----------------------------------------------------------------------------
# OPTIONAL: Feature Weights
# ----------------------------------------------------------------------------

# Override default weights for each data source (0.0 to 1.0)
# Total doesn't need to sum to 1.0 - engine normalizes internally
# Set to 0 to completely disable a fetcher
#
# Default weights (if not overridden):
#   ETF Flows:         0.20
#   Exchange Netflow:  0.20
#   DXY (Dollar):      0.15
#   Fear & Greed:      0.15
#   Price MA:          0.15
#   Funding Rate:      0.10
#   Macro:             0.05

# WEIGHT_ETF_FLOWS=0.20
# WEIGHT_EXCHANGE_NETFLOW=0.20
# WEIGHT_DXY=0.15
# WEIGHT_FEAR_GREED=0.15
# WEIGHT_PRICE_MA=0.15
# WEIGHT_FUNDING=0.10
# WEIGHT_MACRO=0.05

# Experimental fetchers (disabled by default)
# WEIGHT_COINBASE_PREMIUM=0
# WEIGHT_STABLECOIN_ISSUANCE=0

# Enable experimental fetchers
# FETCH_COINBASE_PREMIUM=false
# FETCH_STABLECOIN_ISSUANCE=false

# ----------------------------------------------------------------------------
# OPTIONAL: Google Sheets Integration
# ----------------------------------------------------------------------------

# Path to Google service account JSON credentials
# Get from: https://console.cloud.google.com/iam-admin/serviceaccounts
# Leave empty to disable Sheets sync
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Google Sheets spreadsheet ID (from URL)
# Format: https://docs.google.com/spreadsheets/d/SPREADSHEET_ID/edit
# SPREADSHEET_ID=

# ----------------------------------------------------------------------------
# OPTIONAL: BTC 15m Up/Down and Live Price Feed
# ----------------------------------------------------------------------------

# Gamma series_id for BTC 15m Up/Down events (default 10192)
# POLYMARKET_SERIES_ID_15M=10192

# Outcome labels for Up/Down markets (default Up / Down)
# POLYMARKET_UP_LABEL=Up
# POLYMARKET_DOWN_LABEL=Down

# Polymarket live data WebSocket (for Chainlink BTC price in 15m context)
# POLYMARKET_LIVE_WS_URL=wss://ws-live-data.polymarket.com

# Polygon RPC for Chainlink BTC/USD fallback (HTTP and WSS)
# POLYGON_RPC_URL=https://polygon-rpc.com
# POLYGON_RPC_URLS=https://polygon-rpc.com,https://rpc.ankr.com/polygon
# POLYGON_WSS_URL=
# POLYGON_WSS_URLS=wss://polygon-bor-rpc.publicnode.com

# Chainlink BTC/USD aggregator on Polygon
# CHAINLINK_BTC_USD_AGGREGATOR=0xc907E116054Ad103354f2D350FD2514433D57F6f

# Min interval between Chainlink HTTP fetches (seconds)
# CHAINLINK_HTTP_CACHE_SECONDS=2

# ----------------------------------------------------------------------------
# OPTIONAL: Proxy (HTTP/HTTPS requests only)
# ----------------------------------------------------------------------------
# httpx respects these for Gamma, CLOB, Binance, Polygon RPC
# WebSocket connections (Polymarket live, Chainlink WSS) do not use proxy by default
# HTTPS_PROXY=http://127.0.0.1:8080
# HTTP_PROXY=http://127.0.0.1:8080
# ALL_PROXY=socks5://127.0.0.1:1080
# NO_PROXY=localhost,127.0.0.1

# ----------------------------------------------------------------------------
# OPTIONAL: Development Settings
# ----------------------------------------------------------------------------

# Environment name (affects startup warnings)
# Options: development, staging, production
# ENV=development

# ============================================================================
# Quick Reference
# ============================================================================
#
# REQUIRED vars (bot won't start without these):
#   - TELEGRAM_BOT_TOKEN
#   - TELEGRAM_WEBHOOK_SECRET
#   - TELEGRAM_ALLOWED_USER_IDS
#   - DATABASE_URL
#
# RECOMMENDED for production:
#   - EOD_CRON_SECRET
#   - ADMIN_CHAT_ID
#
# Most common adjustments:
#   - EDGE_THRESHOLD (higher = fewer signals)
#   - KELLY_FRACTION (lower = smaller positions)
#   - PAPER_TRADING (true for testing)
#
# See docs/SETUP_GUIDE.md for detailed configuration guide
# ============================================================================
